#!/bin/bash

FIRMWARE_PATH=/firmware
export APPDIR=$WORKSPACE_DIR
PLATFORM_NAME="PLATFORM=$1"

# export MAKE_VERBOSITY=1 to force verbosity,
# otherwise disable verbosity by default.
if [ -z "$MAKE_VERBOSITY" ]; then
	MAKE_VERBOSITY=0
fi

if [ "$MODULAR" == "y" ]; then
  cd $FIRMWARE_PATH/modules
  eval "$PLATFORM_NAME make clean all v=$MAKE_VERBOSITY"
else
  cd $FIRMWARE_PATH/main
  eval "$PLATFORM_NAME make v=$MAKE_VERBOSITY"
fi
